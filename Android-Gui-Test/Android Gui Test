package com.example.jason_000.test4;

import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.CalendarView;
import android.widget.CalendarView.OnDateChangeListener;
import android.view.MotionEvent;
import android.widget.ViewFlipper;


public class MainActivity extends Activity {
    LinearLayout mainLayout;
    TextView tv;
    LinearLayout layout;
    private ViewFlipper viewFlipper;
    private float lastX;
    String[] names;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainLayout = (LinearLayout) findViewById(R.id.main);
        layout = new LinearLayout(this);
        tv = new TextView(this);
        CalendarView calendar = (CalendarView) findViewById(R.id.calendar);
        calendar.setOnDateChangeListener(new OnDateChangeListener() {
            @Override
            public void onSelectedDayChange(CalendarView view, int year, int month, int day) {
                popUpEvent();

                    }



        });
        viewFlipper = (ViewFlipper) findViewById(R.id.viewflipper);

    }
    public void popUpEvent() { //This is where we put the Month Events
        Events t1= new Events("test",1);
        Events t2= new Events("test2",2);
        Events t3= new Events("test3",3);
        Events t5= new Events("test4",4);
        Events events[] = {t1, t2, t3, t5};
         names = new String [events.length];//Set Events Here
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this);
        LayoutInflater inflater = getLayoutInflater();
        View convertView = (View) inflater.inflate(R.layout.custom, null);
        alertDialog.setView(convertView);
        alertDialog.setTitle("Todays Events");
        ListView lv = (ListView) convertView.findViewById(R.id.listView1);
        for (int i=0;i<events.length;i++)
        {
            names[i]=events[i].getName();
        }
        ArrayAdapter<String> adapter = new MySimpleArrayAdapter<>(this, android.R.layout.simple_list_item_1, names,events);
        lv.setAdapter(adapter);
        alertDialog.show();
    }

    public boolean onTouchEvent(MotionEvent touchevent) {

        switch (touchevent.getAction()) {

            case MotionEvent.ACTION_DOWN:
                lastX = touchevent.getX();

                break;

            case MotionEvent.ACTION_UP:

                float currentX = touchevent.getX();



                // Handling left to right screen swap.

                if (lastX < currentX) {



                    // If there aren't any other children, just break.

                    if (viewFlipper.getDisplayedChild() == 0)
                        break;



                    // Next screen comes in from left.

                    viewFlipper.setInAnimation(this, R.anim.slide_in_from_left);

                    // Current screen goes out from right.

                    viewFlipper.setOutAnimation(this, R.anim.slide_out_to_right);



                    // Display next screen.

                    viewFlipper.showNext();

                }



                // Handling right to left screen swap.

                if (lastX > currentX) {



                    // If there is a child (to the left), kust break.
                    if (viewFlipper.getDisplayedChild() == 1)
                        break;
                    // Next screen comes in from right.
                    viewFlipper.setInAnimation(this, R.anim.slide_in_from_right);
                    // Current screen goes out from left.
                    viewFlipper.setOutAnimation(this, R.anim.slide_out_to_left);
                    // Display previous screen.
                    viewFlipper.showPrevious();
                }
                break;
        }
        return false;
    }

}
